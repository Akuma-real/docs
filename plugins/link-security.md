# 链接安全跳转中台插件文档（V2重构版）

## 一、插件介绍
### 1、应用场景
前段时间，读了一篇博客，有位博主提及自己的博客内有一些恶意链接或者链接被人劫持，自己未能及时发现并从博客上清理掉而导致博客被搜索引擎拉入黑名单中。面对这种情况，有时候就算及时处理了，也可能在外链的权重上或多或少受到波及。

如果加了安全跳转中台后，这样就可以让自己的主域名成功与外链间接通过中台串联，而不是直接关系。这样就会避免自己的博客被搜索引擎拉黑或导致拉黑的机率提高。由于网络安全的问题这些年越来越被关注，好多大型平台例如微博，微信，qq，网易等，都在这几年为自家的网络产品添加了一个安全跳转的中台页面。

### 2、核心作用
链接安全跳转中台通过将站内链接进行替换，让其不直接进行跳转，而是通过一个跳转页面将目标链接和当前站点进行隔离，可有效保障主站安全的同时，平衡外链开放性与可控性，尤其适用于对安全性和SEO权重敏感的平台。

V2重构版的插件放弃之前的通过文章扩展点和页面扩展点处理文章内容的方案，采用了 **2.20.0 的** `ElementTagPostProcessor` 对内容的 `a标签` 进行处理，极大的减小了内容处理时的内存占用并提高了整个内容的 `a标签` 处理速度。

在获取到 `a 标签`后修改 `a 标签`的 href 属性，而这个 href 属性是我们的安全跳转中台，关键的一点就是在 a标签的 `rel属性` 中加入 `noopener external nofollow noreferrer` 这个值。

超链接a标签的 `rel="noopener noreferrer"`属性**是一种新特性，它能让网站更安全**，超链接添加rel="noopener noreferrer"来**防止钓鱼网站**，因为它获取的window.opener的值为null。在新打开的页面中，通过window.opener可以获取到源页面的部分控制权，即使新打开的页面是跨域也可以获取部分控制权。**当a标签中加入了rel="noopener noreferrer"属性，`window.opener` 会为null。**

超链接添加 `rel=external nofollow` 是为了告诉搜索引擎，不要将链接计入权重中，他是告诉一些非本站的链接、不想传递权重，例如网页里的统计代码、备案号链接、供用户查询链接等。这两个属性的**大致可以解释为 “这个链接非本站链接，不要爬取也不要传递权重”**。



### 3、跳转效果预览
![跳转页面预览1](/images/plugins/link-security/preview-01.png)

![跳转页面预览2](/images/plugins/link-security/preview-02.png)

![跳转页面预览3](/images/plugins/link-security/preview-03.png)

## 二、使用方式